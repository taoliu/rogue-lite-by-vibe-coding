<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RogueLite</title>
  <style>
    :root {
      --bg: #0c0f14;
      --panel: #121722;
      --accent: #77e6b6;
      --muted: #9aa4b2;
      --danger: #ff6b6b;
      --gold: #ffd166;
    }
    html, body { height: 100%; margin: 0; background: var(--bg); color: #e6edf3; font: 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial; }
    .wrap { display: grid; grid-template-columns: 1fr 320px; gap: 12px; max-width: 1200px; margin: 10px auto; padding: 0 10px; }
    #view { background: #0a0d12; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,.4); width: 100%; aspect-ratio: 4/3; image-rendering: pixelated; }
    .side { background: var(--panel); border-radius: 12px; padding: 12px; display: grid; grid-template-rows: auto auto 1fr auto; gap: 10px; }
    h1 { font-size: 18px; margin: 0 0 4px; color: var(--accent); }
    .row { display: flex; align-items: center; gap: 6px; flex-wrap: wrap; }
    .badge { padding: 2px 6px; border-radius: 6px; background: #1a2233; color: #c9d4e3; }
    .red { color: var(--danger); }
    .gold { color: var(--gold); }
    .muted { color: var(--muted); }
    .log { background: #0e1420; border-radius: 10px; padding: 8px; height: 140px; overflow: auto; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
    .inv { display: grid; grid-template-columns: repeat(3, 1fr); gap: 6px; }
    .inv .slot { background: #0e1420; border: 1px solid #1b2538; border-radius: 8px; padding: 6px; min-height: 56px; display: grid; place-items: center; text-align: center; }
    .controls { background: #0e1420; border-radius: 10px; padding: 8px; font-size: 12px; color: var(--muted); }
    button, select { background: #152038; border: 1px solid #253659; color: #e6edf3; padding: 6px 10px; border-radius: 8px; cursor: pointer; }
    button:hover { filter: brightness(1.1); }
    .topbar { display: flex; align-items: center; justify-content: space-between; gap: 8px; }
    .statline { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; }
    .bar { height: 8px; background: #182033; border-radius: 5px; overflow: hidden; }
    .bar > i { display: block; height: 100%; background: linear-gradient(90deg, #2dd4bf, #34d399); }
    .bar.hp > i { background: linear-gradient(90deg, #ef4444, #f97316); }
    .modal { position: fixed; inset: 0; background: rgba(0,0,0,.7); display: grid; place-items: center; }
    .card { width: min(540px, 92vw); background: #0f1522; border: 1px solid #1f2a44; border-radius: 14px; padding: 16px; box-shadow: 0 25px 60px rgba(0,0,0,.5); }
    .grid3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 10px; }
    .classbtn { text-align: left; }
    .classbtn h3 { margin: 4px 0; font-size: 16px; color: var(--accent); }
    .classbtn p { margin: 0; font-size: 12px; color: var(--muted); }
    .seed { width: 130px; }
  </style>
</head>
<body>
  <div class="wrap">
    <canvas id="view" width="960" height="720"></canvas>
    <aside class="side">
      <div class="topbar">
        <h1>RogueLite</h1>
        <div class="row">
          <button id="btnRestart">New Run</button>
          <button id="btnHelp">Help</button>
        </div>
      </div>
      <div class="statline">
        <div>
          <div class="row"><span class="badge">Class</span><span id="uiClass">‚Äî</span></div>
          <div class="row"><span class="badge">Lvl</span><span id="uiLvl">1</span><span class="badge">XP</span><span id="uiXP">0</span></div>
          <div class="row"><span class="badge">ATK</span><span id="uiAtk">0</span><span class="badge">DEF</span><span id="uiDef">0</span></div>
        </div>
        <div>
          <div class="row"><span class="badge">HP</span><span id="uiHP">0/0</span></div>
          <div class="bar hp"><i id="barHP" style="width:100%"></i></div>
          <div class="row"><span class="badge">Mana</span><span id="uiMP">0/0</span></div>
          <div class="bar"><i id="barMP" style="width:100%"></i></div>
          <div class="row"><span class="badge">Ammo</span><span id="uiAmmo">0</span></div>
        </div>
      </div>
      <div>
        <div class="row"><span class="badge gold">Gold</span><span id="uiGold">0</span><span class="badge">Floor</span><span id="uiFloor">1</span></div>
        <div class="row"><span class="badge">Weapon</span><span id="uiWeapon">None</span></div>
        <div class="row"><span class="badge">Armor</span><span id="uiArmor">None</span></div>
      </div>
      <div>
        <div class="row"><span class="badge">Inventory</span></div>
        <div class="inv" id="uiInv"></div>
      </div>
      <div>
        <div class="row"><span class="badge">Log</span></div>
        <div class="log" id="uiLog"></div>
      </div>
      <div class="controls">
        <b>Controls</b><br/>
        Move: WASD / Arrow keys ¬∑ Wait: . (period) ¬∑ Attack: F (melee) ¬∑ Ability: Space (class skill) ¬∑ Pick up/Open chest: G ¬∑ Descend stairs: &gt; <br/>
        Inventory: click item or press 1..9 to use, Shift+1..9 to drop<br/>
        Warrior ability: Whirlwind (hit all adjacent) ¬∑ Mage: Fireball (AoE, 2x2) ¬∑ Hunter: Shoot arrow (range 5)
      </div>
    </aside>
  </div>

  <!-- Class select modal -->
  <div class="modal" id="classModal">
    <div class="card">
      <h2>Choose Your Class</h2>
      <div class="row">
        <label>Seed <input id="seed" class="seed" placeholder="random"/></label>
      </div>
      <div class="grid3">
        <button class="classbtn" data-class="warrior">
          <h3>‚öîÔ∏è Warrior</h3>
          <p>High HP &amp; melee damage. Ability: Whirlwind around you.</p>
        </button>
        <button class="classbtn" data-class="mage">
          <h3>‚ú® Mage</h3>
          <p>Low HP, high mana. Ability: Fireball 2x2 blast.</p>
        </button>
        <button class="classbtn" data-class="hunter">
          <h3>üèπ Hunter</h3>
          <p>Balanced. Ability: Shoot arrow up to 5 tiles.</p>
        </button>
      </div>
    </div>
  </div>
  <script type="importmap">
    {
      "imports": {
        "three": "/node_modules/three/build/three.module.js"
      }
    }
  </script>
  <script type="module" src="utils.js"></script>
  <script type="module" src="data.js"></script>
  <script type="module" src="render.js"></script>
  <script type="module" src="game.js"></script>
  <script type="module" src="input.js"></script>
</body>
</html>
